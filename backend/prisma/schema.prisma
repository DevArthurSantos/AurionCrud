generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Customer {
  id                String              @id @default(uuid())
  ip                String
  token             String              @default(uuid())
  requests          Int                 @default(0)
  createdAt         DateTime            @default(now())
  CustomerInstances CustomerInstances[]

  @@map("customer")
}

model Instance {
  id                String              @id @default(uuid())
  instance_name     String
  createdAt         DateTime            @default(now())
  CustomerInstances CustomerInstances[]
  InstanceItems     InstanceItems[]

  @@map("instance")
}

model Item {
  id            String          @id @default(uuid())
  data          String
  CreatedAt     DateTime        @default(now())
  InstanceItems InstanceItems[]

  @@map("item")
}

model Template {
  id   String @id @default(uuid())
  type String
  data String

  @@map("template")
}

model CustomerInstances {
  id String @id @default(uuid())

  instance_id String
  instance    Instance @relation(fields: [instance_id], references: [id], onDelete: Cascade)
  customer_id String
  customer    Customer @relation(fields: [customer_id], references: [id], onDelete: Cascade)

  @@map("customer_instances")
}

model InstanceItems {
  id          String   @id @default(uuid())
  instance_id String
  instance    Instance @relation(fields: [instance_id], references: [id], onDelete: Cascade)
  item_id     String
  item        Item     @relation(fields: [item_id], references: [id], onDelete: Cascade)

  @@map("instance_items")
}
